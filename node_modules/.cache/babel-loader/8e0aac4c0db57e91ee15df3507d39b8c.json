{"ast":null,"code":"import React,{useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{setTimeAction}from\"../../store/timeReducer\";import{setStatusAction,setLittlePauseAction,setFirstRunAction}from\"../../store/timerStatus\";import{defaultTimerSetting,timerPauseSetting}from\"../../utilites/timerSettings\";import{useLocalStorage}from\"../../hooks/useLocalStorage\";import InputTimer from\"./InputTimer/InputTimer\";import TimerSpan from\"./TimerSpan/TimerSpan\";import TimerImg from\"./TimerImg/TimerImg\";import classes from\"../Timer/Timer.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Timer=function Timer(){var dispatch=useDispatch();var timer=useSelector(function(state){return state.time.timer;});var status=useSelector(function(state){return state.status;});var count=useSelector(function(state){return state.totalCount;});var updateM=timer.minutes,updateS=timer.seconds;// SAVE AND LOAD LOCAL STORAGE //\nuseLocalStorage(\"DATA:TIMER\",timer,setTimeAction);useLocalStorage(\"SETTING:LITTLE_PAUSE_STATUS\",status.littlePause,setLittlePauseAction);useLocalStorage(\"DATA:FIRST_RUN_STATUS\",status.firstRunStatus,setFirstRunAction);// AUTO PLAY AFTER ROUND //\nuseEffect(function(){if(status.littlePause&&status.reloadStatus)dispatch(setStatusAction({play:true}));},[status.littlePause]);// TIMER CORE // DONT TOUCH !!! //\nuseEffect(function(){if(status.play){if(status.firstRunStatus)dispatch(setFirstRunAction(false));var intervalId=setInterval(function(){if(updateM===0&&updateS===1){dispatch(setStatusAction({play:!status.play}));if(!status.littlePause){dispatch(timerPauseSetting({status:status,count:count}));return clearInterval(intervalId);}else dispatch(defaultTimerSetting());return clearInterval(intervalId);}if(updateS===0){updateS=60;updateM--;}updateS--;dispatch(setTimeAction({minutes:updateM,seconds:updateS}));},1000);return function(){return clearInterval(intervalId);};}},[status.play,status.littlePause]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.timer,children:[/*#__PURE__*/_jsx(TimerSpan,{timer:timer}),/*#__PURE__*/_jsx(TimerImg,{timer:timer}),/*#__PURE__*/_jsx(InputTimer,{status:status})]});};export default Timer;","map":{"version":3,"sources":["C:/Users/bouku/Desktop/Time Tracker/time-tracker/src/components/Timer/Timer.jsx"],"names":["React","useEffect","useSelector","useDispatch","setTimeAction","setStatusAction","setLittlePauseAction","setFirstRunAction","defaultTimerSetting","timerPauseSetting","useLocalStorage","InputTimer","TimerSpan","TimerImg","classes","Timer","dispatch","timer","state","time","status","count","totalCount","updateM","minutes","updateS","seconds","littlePause","firstRunStatus","reloadStatus","play","intervalId","setInterval","clearInterval"],"mappings":"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","sourcesContent":["import React, {useEffect} from \"react\";\r\nimport {useSelector, useDispatch} from \"react-redux\";\r\nimport {setTimeAction} from \"../../store/timeReducer\";\r\nimport {\r\n\tsetStatusAction,\r\n\tsetLittlePauseAction,\r\n\tsetFirstRunAction,\r\n} from \"../../store/timerStatus\";\r\nimport {\r\n\tdefaultTimerSetting,\r\n\ttimerPauseSetting,\r\n} from \"../../utilites/timerSettings\";\r\nimport {useLocalStorage} from \"../../hooks/useLocalStorage\";\r\nimport InputTimer from \"./InputTimer/InputTimer\";\r\nimport TimerSpan from \"./TimerSpan/TimerSpan\";\r\nimport TimerImg from \"./TimerImg/TimerImg\";\r\nimport classes from \"../Timer/Timer.module.css\";\r\n\r\nconst Timer = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst timer = useSelector((state) => state.time.timer);\r\n\tconst status = useSelector((state) => state.status);\r\n\tconst count = useSelector((state) => state.totalCount);\r\n\tlet updateM = timer.minutes,\r\n\t\tupdateS = timer.seconds;\r\n\r\n\t// SAVE AND LOAD LOCAL STORAGE //\r\n\r\n\tuseLocalStorage(\"DATA:TIMER\", timer, setTimeAction);\r\n\r\n\tuseLocalStorage(\r\n\t\t\"SETTING:LITTLE_PAUSE_STATUS\",\r\n\t\tstatus.littlePause,\r\n\t\tsetLittlePauseAction,\r\n\t);\r\n\r\n\tuseLocalStorage(\r\n\t\t\"DATA:FIRST_RUN_STATUS\",\r\n\t\tstatus.firstRunStatus,\r\n\t\tsetFirstRunAction,\r\n\t);\r\n\r\n\t// AUTO PLAY AFTER ROUND //\r\n\r\n\tuseEffect(() => {\r\n\t\tif (status.littlePause && status.reloadStatus)\r\n\t\t\tdispatch(setStatusAction({play: true}));\r\n\t}, [status.littlePause]);\r\n\r\n\t// TIMER CORE // DONT TOUCH !!! //\r\n\r\n\tuseEffect(() => {\r\n\t\tif (status.play) {\r\n\t\t\tif (status.firstRunStatus) dispatch(setFirstRunAction(false));\r\n\t\t\tconst intervalId = setInterval(() => {\r\n\t\t\t\tif (updateM === 0 && updateS === 1) {\r\n\t\t\t\t\tdispatch(setStatusAction({play: !status.play}));\r\n\t\t\t\t\tif (!status.littlePause) {\r\n\t\t\t\t\t\tdispatch(timerPauseSetting({status, count}));\r\n\t\t\t\t\t\treturn clearInterval(intervalId);\r\n\t\t\t\t\t} else dispatch(defaultTimerSetting());\r\n\t\t\t\t\treturn clearInterval(intervalId);\r\n\t\t\t\t}\r\n\t\t\t\tif (updateS === 0) {\r\n\t\t\t\t\tupdateS = 60;\r\n\t\t\t\t\tupdateM--;\r\n\t\t\t\t}\r\n\t\t\t\tupdateS--;\r\n\t\t\t\tdispatch(setTimeAction({minutes: updateM, seconds: updateS}));\r\n\t\t\t}, 1000);\r\n\t\t\treturn () => clearInterval(intervalId);\r\n\t\t}\r\n\t}, [status.play, status.littlePause]);\r\n\r\n\treturn (\r\n\t\t<div className={classes.timer}>\r\n\t\t\t<TimerSpan timer={timer} />\r\n\t\t\t<TimerImg timer={timer} />\r\n\t\t\t<InputTimer status={status} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Timer;\r\n"]},"metadata":{},"sourceType":"module"}