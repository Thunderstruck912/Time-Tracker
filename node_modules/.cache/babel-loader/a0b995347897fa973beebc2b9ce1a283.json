{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { setTotalCountAction } from \"../store/totalCountReducer\";\nimport { DATA } from \"../utilites/date\";\nconst statsName = \"DATA:STATISTICS\";\nconst {\n  dateNow\n} = DATA;\nexport const useStats = _ref => {\n  _s();\n\n  let {\n    count,\n    status\n  } = _ref;\n  const dispatch = useDispatch();\n  const statistics = JSON.parse(localStorage.getItem(statsName));\n  const [stats, setStats] = useState(statistics || []); // ADD AND SAVE LOCAL STORAGE //\n\n  useEffect(() => {\n    const newStats = {\n      data: dateNow(),\n      count: count.totalCount + 1\n    };\n    setStats([...stats, newStats]);\n    if (stats && status.reloadStatus) localStorage.setItem(statsName, JSON.stringify(stats));\n  }, [count.totalCount]); // LOAD AND AUTO RECET NEXT DAY //\n\n  useEffect(() => {\n    if (statistics && statistics.length >= 1) {\n      dispatch(setTotalCountAction(statistics[statistics.length - 1].count));\n\n      if (statistics[0].data !== statistics[statistics.length - 1].data) {\n        localStorage.removeItem(statsName);\n        dispatch(setTotalCountAction(0));\n      }\n    }\n  }, []);\n};\n\n_s(useStats, \"yh5XHkkt7qnXSJihcwJR1c4b2cs=\", false, function () {\n  return [useDispatch];\n});","map":{"version":3,"sources":["C:/Users/bouku/Desktop/Time Tracker/time-tracker/src/hooks/useStats.js"],"names":["useState","useEffect","useDispatch","setTotalCountAction","DATA","statsName","dateNow","useStats","count","status","dispatch","statistics","JSON","parse","localStorage","getItem","stats","setStats","newStats","data","totalCount","reloadStatus","setItem","stringify","length","removeItem"],"mappings":";;AAAA,SAAQA,QAAR,EAAkBC,SAAlB,QAAkC,OAAlC;AACA,SAAQC,WAAR,QAA0B,aAA1B;AACA,SAAQC,mBAAR,QAAkC,4BAAlC;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AAEA,MAAMC,SAAS,GAAG,iBAAlB;AACA,MAAM;AAACC,EAAAA;AAAD,IAAYF,IAAlB;AAEA,OAAO,MAAMG,QAAQ,GAAG,QAAqB;AAAA;;AAAA,MAApB;AAACC,IAAAA,KAAD;AAAQC,IAAAA;AAAR,GAAoB;AAC5C,QAAMC,QAAQ,GAAGR,WAAW,EAA5B;AACA,QAAMS,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBV,SAArB,CAAX,CAAnB;AACA,QAAM,CAACW,KAAD,EAAQC,QAAR,IAAoBjB,QAAQ,CAACW,UAAU,IAAI,EAAf,CAAlC,CAH4C,CAK5C;;AACAV,EAAAA,SAAS,CAAC,MAAM;AACf,UAAMiB,QAAQ,GAAG;AAACC,MAAAA,IAAI,EAAEb,OAAO,EAAd;AAAkBE,MAAAA,KAAK,EAAEA,KAAK,CAACY,UAAN,GAAmB;AAA5C,KAAjB;AACAH,IAAAA,QAAQ,CAAC,CAAC,GAAGD,KAAJ,EAAWE,QAAX,CAAD,CAAR;AACA,QAAIF,KAAK,IAAIP,MAAM,CAACY,YAApB,EACCP,YAAY,CAACQ,OAAb,CAAqBjB,SAArB,EAAgCO,IAAI,CAACW,SAAL,CAAeP,KAAf,CAAhC;AACD,GALQ,EAKN,CAACR,KAAK,CAACY,UAAP,CALM,CAAT,CAN4C,CAa5C;;AAEAnB,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIU,UAAU,IAAIA,UAAU,CAACa,MAAX,IAAqB,CAAvC,EAA0C;AACzCd,MAAAA,QAAQ,CAACP,mBAAmB,CAACQ,UAAU,CAACA,UAAU,CAACa,MAAX,GAAoB,CAArB,CAAV,CAAkChB,KAAnC,CAApB,CAAR;;AACA,UAAIG,UAAU,CAAC,CAAD,CAAV,CAAcQ,IAAd,KAAuBR,UAAU,CAACA,UAAU,CAACa,MAAX,GAAoB,CAArB,CAAV,CAAkCL,IAA7D,EAAmE;AAClEL,QAAAA,YAAY,CAACW,UAAb,CAAwBpB,SAAxB;AACAK,QAAAA,QAAQ,CAACP,mBAAmB,CAAC,CAAD,CAApB,CAAR;AACA;AACD;AACD,GARQ,EAQN,EARM,CAAT;AASA,CAxBM;;GAAMI,Q;UACKL,W","sourcesContent":["import {useState, useEffect} from \"react\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {setTotalCountAction} from \"../store/totalCountReducer\";\r\nimport {DATA} from \"../utilites/date\";\r\n\r\nconst statsName = \"DATA:STATISTICS\";\r\nconst {dateNow} = DATA;\r\n\r\nexport const useStats = ({count, status}) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst statistics = JSON.parse(localStorage.getItem(statsName));\r\n\tconst [stats, setStats] = useState(statistics || []);\r\n\r\n\t// ADD AND SAVE LOCAL STORAGE //\r\n\tuseEffect(() => {\r\n\t\tconst newStats = {data: dateNow(), count: count.totalCount + 1};\r\n\t\tsetStats([...stats, newStats]);\r\n\t\tif (stats && status.reloadStatus)\r\n\t\t\tlocalStorage.setItem(statsName, JSON.stringify(stats));\r\n\t}, [count.totalCount]);\r\n\r\n\t// LOAD AND AUTO RECET NEXT DAY //\r\n\r\n\tuseEffect(() => {\r\n\t\tif (statistics && statistics.length >= 1) {\r\n\t\t\tdispatch(setTotalCountAction(statistics[statistics.length - 1].count));\r\n\t\t\tif (statistics[0].data !== statistics[statistics.length - 1].data) {\r\n\t\t\t\tlocalStorage.removeItem(statsName);\r\n\t\t\t\tdispatch(setTotalCountAction(0));\r\n\t\t\t}\r\n\t\t}\r\n\t}, []);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}