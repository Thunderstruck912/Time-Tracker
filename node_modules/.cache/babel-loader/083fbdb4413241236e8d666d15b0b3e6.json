{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\bouku\\\\Desktop\\\\Time Tracker\\\\time-tracker\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _slicedToArray from\"C:\\\\Users\\\\bouku\\\\Desktop\\\\Time Tracker\\\\time-tracker\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{setTotalCountAction}from\"../../store/totalCountReducer\";import{useSelector,useDispatch}from\"react-redux\";import classes from\"./TotalCount.module.css\";import{DATA}from\"../../utilites/date\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var statsName=\"DATA:STATISTICS\";var dateNow=DATA.dateNow;var TotalCount=function TotalCount(){var dispatch=useDispatch();var count=useSelector(function(state){return state.totalCount;});var status=useSelector(function(state){return state.status;});var _useState=useState(JSON.parse(localStorage.getItem(statsName))||[]),_useState2=_slicedToArray(_useState,2),stats=_useState2[0],setStats=_useState2[1];var addStats=function addStats(){var newStats={data:dateNow(),count:count.totalCount+1};setStats([].concat(_toConsumableArray(stats),[newStats]));};// ADD AND SAVE //\nuseEffect(function(){addStats();if(stats&&status.reloadStatus)localStorage.setItem(statsName,JSON.stringify(stats));},[count.totalCount]);// LOAD AND NEXT DAY RESET COUNT //\nuseEffect(function(){if(JSON.parse(localStorage.getItem(statsName))){var statistics=JSON.parse(localStorage.getItem(statsName));if(statistics.length>=1){dispatch(setTotalCountAction(statistics[statistics.length-1].count));}if(statistics[0].data!==statistics[statistics.length-1].data){localStorage.removeItem(statsName);dispatch(setTotalCountAction(0));}}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:classes.count_wrapper,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.count,children:count.totalCount}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0438\\u0437\"}),/*#__PURE__*/_jsx(\"span\",{children:count.defaultCount}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u043F\\u043E\\u043C\\u0438\\u0434\\u043E\\u0440\\u043E\\u043A\"}),count.totalCount>=count.defaultCount?/*#__PURE__*/_jsx(\"span\",{className:classes.congrat,children:\"- \\u0414\\u0435\\u043D\\u044C \\u043F\\u0440\\u043E\\u0436\\u0438\\u0442 \\u043D\\u0435 \\u0437\\u0440\\u044F!\"}):/*#__PURE__*/_jsx(\"span\",{})]});};export default TotalCount;","map":{"version":3,"sources":["C:/Users/bouku/Desktop/Time Tracker/time-tracker/src/components/TotalCount/TotalCount.jsx"],"names":["React","useState","useEffect","setTotalCountAction","useSelector","useDispatch","classes","DATA","statsName","dateNow","TotalCount","dispatch","count","state","totalCount","status","JSON","parse","localStorage","getItem","stats","setStats","addStats","newStats","data","reloadStatus","setItem","stringify","statistics","length","removeItem","count_wrapper","defaultCount","congrat"],"mappings":"0SAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAAQC,mBAAR,KAAkC,+BAAlC,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,MAAOC,CAAAA,OAAP,KAAoB,yBAApB,CACA,OAAQC,IAAR,KAAmB,qBAAnB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,iBAAlB,CACA,GAAOC,CAAAA,OAAP,CAAkBF,IAAlB,CAAOE,OAAP,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACxB,GAAMC,CAAAA,QAAQ,CAAGN,WAAW,EAA5B,CACA,GAAMO,CAAAA,KAAK,CAAGR,WAAW,CAAC,SAACS,KAAD,QAAWA,CAAAA,KAAK,CAACC,UAAjB,EAAD,CAAzB,CACA,GAAMC,CAAAA,MAAM,CAAGX,WAAW,CAAC,SAACS,KAAD,QAAWA,CAAAA,KAAK,CAACE,MAAjB,EAAD,CAA1B,CACA,cAA0Bd,QAAQ,CACjCe,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBX,SAArB,CAAX,GAA+C,EADd,CAAlC,wCAAOY,KAAP,eAAcC,QAAd,eAIA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACtB,GAAIC,CAAAA,QAAQ,CAAG,CAACC,IAAI,CAAEf,OAAO,EAAd,CAAkBG,KAAK,CAAEA,KAAK,CAACE,UAAN,CAAmB,CAA5C,CAAf,CACAO,QAAQ,8BAAKD,KAAL,GAAYG,QAAZ,GAAR,CACA,CAHD,CAIA;AAEArB,SAAS,CAAC,UAAM,CACfoB,QAAQ,GACR,GAAIF,KAAK,EAAIL,MAAM,CAACU,YAApB,CACCP,YAAY,CAACQ,OAAb,CAAqBlB,SAArB,CAAgCQ,IAAI,CAACW,SAAL,CAAeP,KAAf,CAAhC,EACD,CAJQ,CAIN,CAACR,KAAK,CAACE,UAAP,CAJM,CAAT,CAMA;AACAZ,SAAS,CAAC,UAAM,CACf,GAAIc,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBX,SAArB,CAAX,CAAJ,CAAiD,CAChD,GAAIoB,CAAAA,UAAU,CAAGZ,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBX,SAArB,CAAX,CAAjB,CACA,GAAIoB,UAAU,CAACC,MAAX,EAAqB,CAAzB,CAA4B,CAC3BlB,QAAQ,CAACR,mBAAmB,CAACyB,UAAU,CAACA,UAAU,CAACC,MAAX,CAAoB,CAArB,CAAV,CAAkCjB,KAAnC,CAApB,CAAR,CACA,CACD,GAAIgB,UAAU,CAAC,CAAD,CAAV,CAAcJ,IAAd,GAAuBI,UAAU,CAACA,UAAU,CAACC,MAAX,CAAoB,CAArB,CAAV,CAAkCL,IAA7D,CAAmE,CAClEN,YAAY,CAACY,UAAb,CAAwBtB,SAAxB,EACAG,QAAQ,CAACR,mBAAmB,CAAC,CAAD,CAApB,CAAR,CACA,CACD,CACD,CAXQ,CAWN,EAXM,CAAT,CAaA,mBACC,aAAK,SAAS,CAAEG,OAAO,CAACyB,aAAxB,wBACC,aAAM,SAAS,CAAEzB,OAAO,CAACM,KAAzB,UAAiCA,KAAK,CAACE,UAAvC,EADD,cAEC,sCAFD,cAGC,sBAAOF,KAAK,CAACoB,YAAb,EAHD,cAIC,gFAJD,CAKEpB,KAAK,CAACE,UAAN,EAAoBF,KAAK,CAACoB,YAA1B,cACA,aAAM,SAAS,CAAE1B,OAAO,CAAC2B,OAAzB,8GADA,cAGA,eARF,GADD,CAaA,CA/CD,CAiDA,cAAevB,CAAAA,UAAf","sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport {setTotalCountAction} from \"../../store/totalCountReducer\";\r\nimport {useSelector, useDispatch} from \"react-redux\";\r\nimport classes from \"./TotalCount.module.css\";\r\nimport {DATA} from \"../../utilites/date\";\r\n\r\nconst statsName = \"DATA:STATISTICS\";\r\nconst {dateNow} = DATA;\r\n\r\nconst TotalCount = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst count = useSelector((state) => state.totalCount);\r\n\tconst status = useSelector((state) => state.status);\r\n\tconst [stats, setStats] = useState(\r\n\t\tJSON.parse(localStorage.getItem(statsName)) || [],\r\n\t);\r\n\r\n\tconst addStats = () => {\r\n\t\tlet newStats = {data: dateNow(), count: count.totalCount + 1};\r\n\t\tsetStats([...stats, newStats]);\r\n\t};\r\n\t// ADD AND SAVE //\r\n\r\n\tuseEffect(() => {\r\n\t\taddStats();\r\n\t\tif (stats && status.reloadStatus)\r\n\t\t\tlocalStorage.setItem(statsName, JSON.stringify(stats));\r\n\t}, [count.totalCount]);\r\n\r\n\t// LOAD AND NEXT DAY RESET COUNT //\r\n\tuseEffect(() => {\r\n\t\tif (JSON.parse(localStorage.getItem(statsName))) {\r\n\t\t\tlet statistics = JSON.parse(localStorage.getItem(statsName));\r\n\t\t\tif (statistics.length >= 1) {\r\n\t\t\t\tdispatch(setTotalCountAction(statistics[statistics.length - 1].count));\r\n\t\t\t}\r\n\t\t\tif (statistics[0].data !== statistics[statistics.length - 1].data) {\r\n\t\t\t\tlocalStorage.removeItem(statsName);\r\n\t\t\t\tdispatch(setTotalCountAction(0));\r\n\t\t\t}\r\n\t\t}\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className={classes.count_wrapper}>\r\n\t\t\t<span className={classes.count}>{count.totalCount}</span>\r\n\t\t\t<span>из</span>\r\n\t\t\t<span>{count.defaultCount}</span>\r\n\t\t\t<span>помидорок</span>\r\n\t\t\t{count.totalCount >= count.defaultCount ? (\r\n\t\t\t\t<span className={classes.congrat}>- День прожит не зря!</span>\r\n\t\t\t) : (\r\n\t\t\t\t<span></span>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TotalCount;\r\n"]},"metadata":{},"sourceType":"module"}