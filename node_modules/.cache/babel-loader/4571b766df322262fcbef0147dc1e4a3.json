{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\bouku\\\\Desktop\\\\Time Tracker\\\\time-tracker\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _slicedToArray from\"C:\\\\Users\\\\bouku\\\\Desktop\\\\Time Tracker\\\\time-tracker\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from'react';import{setTotalCountAction}from'../../store/totalCountReducer';import{useSelector,useDispatch}from'react-redux';import classes from'./TotalCount.module.css';import{DATA}from'../../utilites/date';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TotalCount=function TotalCount(){var dispatch=useDispatch();var count=useSelector(function(state){return state.totalCount;});var status=useSelector(function(state){return state.status;});var _useState=useState(JSON.parse(localStorage.getItem('stats'))||[]),_useState2=_slicedToArray(_useState,2),stats=_useState2[0],setStats=_useState2[1];var dateNow=DATA.dateNow,dateNextDay=DATA.dateNextDay;useEffect(function(){addStats();if(stats&&status.reloadStatus)localStorage.setItem('stats',JSON.stringify(stats));},[count.totalCount]);useEffect(function(){if(JSON.parse(localStorage.getItem('stats'))){var statistics=JSON.parse(localStorage.getItem('stats'));if(statistics.length>=1){dispatch(setTotalCountAction(statistics[statistics.length-1].count));if(statistics[statistics.length-1].data===dateNextDay()){localStorage.removeItem('stats');dispatch(setTotalCountAction(0));}}}},[]);var addStats=function addStats(){var newStats={data:dateNow(),count:count.totalCount+1};setStats([].concat(_toConsumableArray(stats),[newStats]));};return/*#__PURE__*/_jsxs(\"div\",{className:classes.count_wrapper,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.count,children:count.totalCount}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0438\\u0437\"}),/*#__PURE__*/_jsx(\"span\",{children:count.defaultCount}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u043F\\u043E\\u043C\\u0438\\u0434\\u043E\\u0440\\u043E\\u043A\"}),count.totalCount>=count.defaultCount?/*#__PURE__*/_jsx(\"span\",{className:classes.congrat,children:\"- \\u0414\\u0435\\u043D\\u044C \\u043F\\u0440\\u043E\\u0436\\u0438\\u0442 \\u043D\\u0435 \\u0437\\u0440\\u044F!\"}):/*#__PURE__*/_jsx(\"span\",{})]});};export default TotalCount;","map":{"version":3,"sources":["C:/Users/bouku/Desktop/Time Tracker/time-tracker/src/components/TotalCount/TotalCount.jsx"],"names":["React","useState","useEffect","setTotalCountAction","useSelector","useDispatch","classes","DATA","TotalCount","dispatch","count","state","totalCount","status","JSON","parse","localStorage","getItem","stats","setStats","dateNow","dateNextDay","addStats","reloadStatus","setItem","stringify","statistics","length","data","removeItem","newStats","count_wrapper","defaultCount","congrat"],"mappings":"0SAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAuBC,SAAvB,KAAuC,OAAvC,CACA,OAAQC,mBAAR,KAAkC,+BAAlC,CAEA,OAAQC,WAAR,CAAoBC,WAApB,KAAsC,aAAtC,CACA,MAAOC,CAAAA,OAAP,KAAoB,yBAApB,CACA,OAAQC,IAAR,KAAmB,qBAAnB,C,wFAGA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,GAAMC,CAAAA,QAAQ,CAAEJ,WAAW,EAA3B,CACA,GAAMK,CAAAA,KAAK,CAACN,WAAW,CAAC,SAACO,KAAD,QAASA,CAAAA,KAAK,CAACC,UAAf,EAAD,CAAvB,CACA,GAAMC,CAAAA,MAAM,CAACT,WAAW,CAAC,SAACO,KAAD,QAASA,CAAAA,KAAK,CAACE,MAAf,EAAD,CAAxB,CACA,cAAuBZ,QAAQ,CAACa,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,GAA2C,EAA5C,CAA/B,wCAAOC,KAAP,eAAaC,QAAb,eACA,GAAOC,CAAAA,OAAP,CAA4Bb,IAA5B,CAAOa,OAAP,CAAeC,WAAf,CAA4Bd,IAA5B,CAAec,WAAf,CAEFnB,SAAS,CAAC,UAAK,CACboB,QAAQ,GACR,GAAGJ,KAAK,EAAEL,MAAM,CAACU,YAAjB,CAA+BP,YAAY,CAACQ,OAAb,CAAqB,OAArB,CAA6BV,IAAI,CAACW,SAAL,CAAeP,KAAf,CAA7B,EAChC,CAHQ,CAGP,CAACR,KAAK,CAACE,UAAP,CAHO,CAAT,CAKAV,SAAS,CAAC,UAAK,CACb,GAAGY,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAH,CAA8C,CAC5C,GAAIS,CAAAA,UAAU,CAACZ,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAf,CACA,GAAGS,UAAU,CAACC,MAAX,EAAmB,CAAtB,CAAyB,CACvBlB,QAAQ,CAACN,mBAAmB,CAACuB,UAAU,CAACA,UAAU,CAACC,MAAX,CAAkB,CAAnB,CAAV,CAAgCjB,KAAjC,CAApB,CAAR,CACA,GAAGgB,UAAU,CAACA,UAAU,CAACC,MAAX,CAAkB,CAAnB,CAAV,CAAgCC,IAAhC,GAAuCP,WAAW,EAArD,CAAwD,CACtDL,YAAY,CAACa,UAAb,CAAwB,OAAxB,EACApB,QAAQ,CAACN,mBAAmB,CAAC,CAAD,CAApB,CAAR,CAAiC,CACpC,CACF,CACF,CAVQ,CAUP,EAVO,CAAT,CAYA,GAAMmB,CAAAA,QAAQ,CAAE,QAAVA,CAAAA,QAAU,EAAK,CACnB,GAAIQ,CAAAA,QAAQ,CAAC,CAACF,IAAI,CAACR,OAAO,EAAb,CAAgBV,KAAK,CAACA,KAAK,CAACE,UAAN,CAAiB,CAAvC,CAAb,CACAO,QAAQ,8BAAKD,KAAL,GAAWY,QAAX,GAAR,CACD,CAHD,CAME,mBACA,aAAK,SAAS,CAAExB,OAAO,CAACyB,aAAxB,wBACE,aAAM,SAAS,CAAEzB,OAAO,CAACI,KAAzB,UAAiCA,KAAK,CAACE,UAAvC,EADF,cAEE,sCAFF,cAGE,sBAAOF,KAAK,CAACsB,YAAb,EAHF,cAIE,gFAJF,CAKGtB,KAAK,CAACE,UAAN,EAAkBF,KAAK,CAACsB,YAAxB,cACD,aAAM,SAAS,CAAE1B,OAAO,CAAC2B,OAAzB,8GADC,cAED,eAPF,GADA,CAUD,CAxCD,CA0CA,cAAezB,CAAAA,UAAf","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport {setTotalCountAction} from '../../store/totalCountReducer'\r\n\r\nimport {useSelector,useDispatch} from 'react-redux';\r\nimport classes from './TotalCount.module.css'\r\nimport {DATA} from '../../utilites/date'\r\n\r\n\r\nconst TotalCount = () => {\r\n  const dispatch= useDispatch()\r\n  const count=useSelector((state)=>state.totalCount)\r\n  const status=useSelector((state)=>state.status)\r\n  const [stats,setStats]=useState(JSON.parse(localStorage.getItem('stats'))||[])\r\n  const {dateNow,dateNextDay}=DATA\r\n\r\nuseEffect(() =>{\r\n  addStats()\r\n  if(stats&&status.reloadStatus) localStorage.setItem('stats',JSON.stringify(stats))\r\n},[count.totalCount])\r\n\r\nuseEffect(() =>{\r\n  if(JSON.parse(localStorage.getItem('stats'))) {\r\n    let statistics=JSON.parse(localStorage.getItem('stats'))\r\n    if(statistics.length>=1) {\r\n      dispatch(setTotalCountAction(statistics[statistics.length-1].count)) \r\n      if(statistics[statistics.length-1].data===dateNextDay()){\r\n        localStorage.removeItem('stats')\r\n        dispatch(setTotalCountAction(0))}\r\n    }  \r\n  }\r\n},[])\r\n\r\nconst addStats= () =>{\r\n  let newStats={data:dateNow(),count:count.totalCount+1}\r\n  setStats([...stats,newStats])\r\n}\r\n\r\n\r\n  return( \r\n  <div className={classes.count_wrapper}>\r\n    <span className={classes.count}>{count.totalCount}</span>\r\n    <span>из</span>\r\n    <span>{count.defaultCount}</span>\r\n    <span>помидорок</span>\r\n    {count.totalCount>=count.defaultCount?\r\n    <span className={classes.congrat}>- День прожит не зря!</span>:\r\n    <span></span>}\r\n  </div>);\r\n};\r\n\r\nexport default TotalCount;\r\n\r\n"]},"metadata":{},"sourceType":"module"}