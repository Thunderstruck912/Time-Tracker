{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\bouku\\\\Desktop\\\\Time Tracker\\\\time-tracker\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{setTotalCountAction}from'../../store/totalCountReducer';import{setTimeAction,resetTimeAction}from'../../store/timeReducer';import{setStatusAction,setLittlePauseAction}from'../../store/timerStatus';import{defaultTimerSetting,timerPauseSetting}from'../../utilites/timerSettings';import{useLocalStorage}from'../../hooks/useLocalStorage';import InputTimer from'../../UI/InputTimer/InputTimer';import classes from'../Timer/Timer.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Timer=function Timer(){var dispatch=useDispatch();var timer=useSelector(function(state){return state.time.timer;});var status=useSelector(function(state){return state.status;});var totalCount=useSelector(function(state){return state.totalCount.totalCount;});var _useState=useState(localStorage.getItem('firstRun')||true),_useState2=_slicedToArray(_useState,2),firstRun=_useState2[0],setFirstRun=_useState2[1];useLocalStorage('SETTING:LITTLE_PAUSE_STATUS',status.littlePause,setLittlePauseAction);var updateM=timer.minutes,updateS=timer.seconds;useEffect(function(){localStorage.setItem('firstRun',firstRun);},[firstRun]);useEffect(function(){if(!firstRun){if(timer!==undefined&&timer.minutes!==0){localStorage.setItem('timerTime',JSON.stringify(timer));}}},[timer]);useEffect(function(){if(localStorage.getItem('timerTime')){var t=JSON.parse(localStorage.getItem('timerTime'));dispatch(setTimeAction({minutes:t.minutes,seconds:t.seconds}));}else{dispatch(resetTimeAction());}},[]);useEffect(function(){if(status.littlePause&&status.reloadStatus)dispatch(setStatusAction({play:true}));},[status.littlePause]);useEffect(function(){if(status.play){if(firstRun)setFirstRun(false);var intervalId=setInterval(function(){if(updateM===0&&updateS===1){dispatch(setStatusAction({play:!status.play}));if(!status.littlePause){dispatch(timerPauseSetting({status:status,totalCount:totalCount}));return clearInterval(intervalId);}else dispatch(defaultTimerSetting());return clearInterval(intervalId);}if(updateS===0){updateS=60;updateM--;}updateS--;dispatch(setTimeAction({minutes:updateM,seconds:updateS}));},1000);return function(){return clearInterval(intervalId);};}},[status.play,status.littlePause]);var setRun=function setRun(){return setFirstRun(false);};return/*#__PURE__*/_jsxs(\"div\",{className:classes.timer,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.span_wrapper,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.span,children:timer.minutes>=10?timer.minutes:'0'+timer.minutes}),/*#__PURE__*/_jsx(\"span\",{className:classes.span,children:\":\"}),/*#__PURE__*/_jsx(\"span\",{className:classes.span,children:timer.seconds>=10?timer.seconds:'0'+timer.seconds})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.img,children:/*#__PURE__*/_jsx(\"div\",{className:classes.wrapper_img,style:{marginLeft:-(timer.minutes*60+timer.seconds)},children:/*#__PURE__*/_jsx(\"img\",{src:require('./icon/scale.png'),alt:1})})}),/*#__PURE__*/_jsx(InputTimer,{status:status,setFirstRun:setRun})]});};export default Timer;","map":{"version":3,"sources":["C:/Users/bouku/Desktop/Time Tracker/time-tracker/src/components/Timer/Timer.jsx"],"names":["React","useState","useEffect","useSelector","useDispatch","setTotalCountAction","setTimeAction","resetTimeAction","setStatusAction","setLittlePauseAction","defaultTimerSetting","timerPauseSetting","useLocalStorage","InputTimer","classes","Timer","dispatch","timer","state","time","status","totalCount","localStorage","getItem","firstRun","setFirstRun","littlePause","updateM","minutes","updateS","seconds","setItem","undefined","JSON","stringify","t","parse","reloadStatus","play","intervalId","setInterval","clearInterval","setRun","span_wrapper","span","img","wrapper_img","marginLeft","require"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport {useSelector,useDispatch} from 'react-redux';\r\nimport {setTotalCountAction} from '../../store/totalCountReducer'\r\nimport { setTimeAction, resetTimeAction} from '../../store/timeReducer';\r\nimport {setStatusAction,setLittlePauseAction} from '../../store/timerStatus'\r\nimport { defaultTimerSetting,timerPauseSetting } from '../../utilites/timerSettings';\r\nimport {useLocalStorage} from '../../hooks/useLocalStorage'\r\n\r\nimport InputTimer from '../../UI/InputTimer/InputTimer';\r\nimport classes from '../Timer/Timer.module.css'\r\n\r\n\r\nconst Timer = () => {\r\n  const dispatch=useDispatch()\r\n  const timer=useSelector((state)=>state.time.timer)\r\n  const status=useSelector((state)=>state.status)\r\n  const totalCount=useSelector((state)=>state.totalCount.totalCount)\r\n  const [firstRun,setFirstRun]=useState(localStorage.getItem('firstRun')||true)\r\n  useLocalStorage('SETTING:LITTLE_PAUSE_STATUS',status.littlePause,setLittlePauseAction)\r\n  let updateM= timer.minutes, updateS=timer.seconds  \r\n\r\n\r\n\r\n  useEffect(() =>{\r\n    localStorage.setItem('firstRun',firstRun)\r\n  },[firstRun])\r\n\r\n\r\n  useEffect(() =>{\r\n    if(!firstRun){\r\n      if(timer!==undefined && timer.minutes!==0) {\r\n        localStorage.setItem('timerTime',JSON.stringify(timer))}\r\n    }\r\n  },[timer])\r\n\r\n  useEffect(() =>{\r\n    if(localStorage.getItem('timerTime')){\r\n      let t= JSON.parse(localStorage.getItem('timerTime'))\r\n      dispatch(setTimeAction({minutes:t.minutes,seconds:t.seconds}))\r\n    } else {\r\n      dispatch(resetTimeAction())\r\n    }\r\n  },[])\r\n\r\n  useEffect(()=>{\r\n    if(status.littlePause&&status.reloadStatus) dispatch(setStatusAction({play:true}))\r\n  },[status.littlePause])\r\n\r\n\r\n\r\n\r\n useEffect(() =>{\r\n  if(status.play){\r\n    if(firstRun) setFirstRun(false)\r\n    const intervalId = setInterval(()=>{\r\n      if(updateM===0&&updateS===1) {\r\n        dispatch(setStatusAction({play:!status.play}))\r\n        if(!status.littlePause){\r\n          dispatch( timerPauseSetting({status,totalCount}))\r\n          return clearInterval(intervalId)\r\n          }else\r\n          dispatch(defaultTimerSetting())\r\n          return clearInterval(intervalId)\r\n        }\r\n    if(updateS===0) {updateS=60;updateM--}\r\n    updateS--\r\n    dispatch(setTimeAction({minutes:updateM,seconds:updateS}))\r\n    },1000);\r\n    return ()=>clearInterval(intervalId)} \r\n },[status.play,status.littlePause])\r\n\r\n  const setRun = () => setFirstRun(false)\r\n\r\n  return (\r\n    <div className={classes.timer} >\r\n      <div className={classes.span_wrapper}>\r\n        <span className={classes.span}>{timer.minutes>=10?timer.minutes:'0'+timer.minutes}</span>\r\n        <span className={classes.span}>:</span>\r\n        <span className={classes.span}>{timer.seconds>=10?timer.seconds:'0'+timer.seconds}</span>\r\n      </div>\r\n      <div className={classes.img} >\r\n        <div className={classes.wrapper_img} style={{marginLeft:-(timer.minutes*60+timer.seconds)}}>\r\n          <img src={require('./icon/scale.png')} alt={1}></img>\r\n        </div>\r\n      </div>\r\n      <InputTimer status={status} setFirstRun={setRun}/>\r\n    </div>\r\n  )};\r\n\r\n\r\nexport default Timer;\r\n"]},"metadata":{},"sourceType":"module"}