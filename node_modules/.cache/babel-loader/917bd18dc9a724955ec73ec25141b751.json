{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\bouku\\\\Desktop\\\\Time Tracker\\\\time-tracker\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{setTimeAction,resetTimeAction}from\"../../store/timeReducer\";import{setStatusAction,setLittlePauseAction}from\"../../store/timerStatus\";import{defaultTimerSetting,timerPauseSetting}from\"../../utilites/timerSettings\";import{useLocalStorage}from\"../../hooks/useLocalStorage\";import InputTimer from\"../../UI/InputTimer/InputTimer\";import classes from\"../Timer/Timer.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var firstTimeStatus=\"DATA:FIRST_TIME_STATUS\";var timerTime=\"DATA:TIMER\";var Timer=function Timer(){var dispatch=useDispatch();var timer=useSelector(function(state){return state.time.timer;});var status=useSelector(function(state){return state.status;});var totalCount=useSelector(function(state){return state.totalCount.totalCount;});var _useState=useState(localStorage.getItem(firstTimeStatus)||true),_useState2=_slicedToArray(_useState,2),firstRun=_useState2[0],setFirstRun=_useState2[1];useLocalStorage(\"SETTING:LITTLE_PAUSE_STATUS\",status.littlePause,setLittlePauseAction);var updateM=timer.minutes,updateS=timer.seconds;useEffect(function(){localStorage.setItem(firstTimeStatus,firstRun);},[firstRun]);useEffect(function(){if(!firstRun){if(timer!==undefined&&timer.minutes!==0){localStorage.setItem(timerTime,JSON.stringify(timer));}}},[timer]);useEffect(function(){if(localStorage.getItem(timerTime)){var t=JSON.parse(localStorage.getItem(timerTime));dispatch(setTimeAction({minutes:t.minutes,seconds:t.seconds}));}else{dispatch(resetTimeAction());}},[]);useEffect(function(){if(status.littlePause&&status.reloadStatus)dispatch(setStatusAction({play:true}));},[status.littlePause]);useEffect(function(){if(status.play){if(firstRun)setFirstRun(false);var intervalId=setInterval(function(){if(updateM===0&&updateS===1){dispatch(setStatusAction({play:!status.play}));if(!status.littlePause){dispatch(timerPauseSetting({status:status,totalCount:totalCount}));return clearInterval(intervalId);}else dispatch(defaultTimerSetting());return clearInterval(intervalId);}if(updateS===0){updateS=60;updateM--;}updateS--;dispatch(setTimeAction({minutes:updateM,seconds:updateS}));},1000);return function(){return clearInterval(intervalId);};}},[status.play,status.littlePause]);var setRun=function setRun(){return setFirstRun(false);};return/*#__PURE__*/_jsxs(\"div\",{className:classes.timer,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.span_wrapper,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.span,children:timer.minutes>=10?timer.minutes:\"0\"+timer.minutes}),/*#__PURE__*/_jsx(\"span\",{className:classes.span,children:\":\"}),/*#__PURE__*/_jsx(\"span\",{className:classes.span,children:timer.seconds>=10?timer.seconds:\"0\"+timer.seconds})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.img,children:/*#__PURE__*/_jsx(\"div\",{className:classes.wrapper_img,style:{marginLeft:-(timer.minutes*60+timer.seconds)},children:/*#__PURE__*/_jsx(\"img\",{src:require(\"./icon/scale.png\"),alt:1})})}),/*#__PURE__*/_jsx(InputTimer,{status:status,setFirstRun:setRun})]});};export default Timer;","map":{"version":3,"sources":["C:/Users/bouku/Desktop/Time Tracker/time-tracker/src/components/Timer/Timer.jsx"],"names":["React","useState","useEffect","useSelector","useDispatch","setTimeAction","resetTimeAction","setStatusAction","setLittlePauseAction","defaultTimerSetting","timerPauseSetting","useLocalStorage","InputTimer","classes","firstTimeStatus","timerTime","Timer","dispatch","timer","state","time","status","totalCount","localStorage","getItem","firstRun","setFirstRun","littlePause","updateM","minutes","updateS","seconds","setItem","undefined","JSON","stringify","t","parse","reloadStatus","play","intervalId","setInterval","clearInterval","setRun","span_wrapper","span","img","wrapper_img","marginLeft","require"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport {useSelector, useDispatch} from \"react-redux\";\r\nimport {setTimeAction, resetTimeAction} from \"../../store/timeReducer\";\r\nimport {setStatusAction, setLittlePauseAction} from \"../../store/timerStatus\";\r\nimport {\r\n\tdefaultTimerSetting,\r\n\ttimerPauseSetting,\r\n} from \"../../utilites/timerSettings\";\r\nimport {useLocalStorage} from \"../../hooks/useLocalStorage\";\r\nimport InputTimer from \"../../UI/InputTimer/InputTimer\";\r\nimport classes from \"../Timer/Timer.module.css\";\r\n\r\nconst firstTimeStatus = \"DATA:FIRST_TIME_STATUS\";\r\nconst timerTime = \"DATA:TIMER\";\r\n\r\nconst Timer = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst timer = useSelector((state) => state.time.timer);\r\n\tconst status = useSelector((state) => state.status);\r\n\tconst totalCount = useSelector((state) => state.totalCount.totalCount);\r\n\tconst [firstRun, setFirstRun] = useState(\r\n\t\tlocalStorage.getItem(firstTimeStatus) || true,\r\n\t);\r\n\tuseLocalStorage(\r\n\t\t\"SETTING:LITTLE_PAUSE_STATUS\",\r\n\t\tstatus.littlePause,\r\n\t\tsetLittlePauseAction,\r\n\t);\r\n\tlet updateM = timer.minutes,\r\n\t\tupdateS = timer.seconds;\r\n\r\n\tuseEffect(() => {\r\n\t\tlocalStorage.setItem(firstTimeStatus, firstRun);\r\n\t}, [firstRun]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!firstRun) {\r\n\t\t\tif (timer !== undefined && timer.minutes !== 0) {\r\n\t\t\t\tlocalStorage.setItem(timerTime, JSON.stringify(timer));\r\n\t\t\t}\r\n\t\t}\r\n\t}, [timer]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (localStorage.getItem(timerTime)) {\r\n\t\t\tlet t = JSON.parse(localStorage.getItem(timerTime));\r\n\t\t\tdispatch(setTimeAction({minutes: t.minutes, seconds: t.seconds}));\r\n\t\t} else {\r\n\t\t\tdispatch(resetTimeAction());\r\n\t\t}\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (status.littlePause && status.reloadStatus)\r\n\t\t\tdispatch(setStatusAction({play: true}));\r\n\t}, [status.littlePause]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (status.play) {\r\n\t\t\tif (firstRun) setFirstRun(false);\r\n\t\t\tconst intervalId = setInterval(() => {\r\n\t\t\t\tif (updateM === 0 && updateS === 1) {\r\n\t\t\t\t\tdispatch(setStatusAction({play: !status.play}));\r\n\t\t\t\t\tif (!status.littlePause) {\r\n\t\t\t\t\t\tdispatch(timerPauseSetting({status, totalCount}));\r\n\t\t\t\t\t\treturn clearInterval(intervalId);\r\n\t\t\t\t\t} else dispatch(defaultTimerSetting());\r\n\t\t\t\t\treturn clearInterval(intervalId);\r\n\t\t\t\t}\r\n\t\t\t\tif (updateS === 0) {\r\n\t\t\t\t\tupdateS = 60;\r\n\t\t\t\t\tupdateM--;\r\n\t\t\t\t}\r\n\t\t\t\tupdateS--;\r\n\t\t\t\tdispatch(setTimeAction({minutes: updateM, seconds: updateS}));\r\n\t\t\t}, 1000);\r\n\t\t\treturn () => clearInterval(intervalId);\r\n\t\t}\r\n\t}, [status.play, status.littlePause]);\r\n\r\n\tconst setRun = () => setFirstRun(false);\r\n\r\n\treturn (\r\n\t\t<div className={classes.timer}>\r\n\t\t\t<div className={classes.span_wrapper}>\r\n\t\t\t\t<span className={classes.span}>\r\n\t\t\t\t\t{timer.minutes >= 10 ? timer.minutes : \"0\" + timer.minutes}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span className={classes.span}>:</span>\r\n\t\t\t\t<span className={classes.span}>\r\n\t\t\t\t\t{timer.seconds >= 10 ? timer.seconds : \"0\" + timer.seconds}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.img}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={classes.wrapper_img}\r\n\t\t\t\t\tstyle={{marginLeft: -(timer.minutes * 60 + timer.seconds)}}>\r\n\t\t\t\t\t<img src={require(\"./icon/scale.png\")} alt={1}></img>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<InputTimer status={status} setFirstRun={setRun} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Timer;\r\n"]},"metadata":{},"sourceType":"module"}