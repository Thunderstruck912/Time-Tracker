{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { DATA } from \"../utilites/date\";\nconst statsName = \"DATA:STATISTICS\";\nconst {\n  dateNow\n} = DATA;\nexport const useStats = _ref => {\n  _s();\n\n  let {\n    count,\n    status\n  } = _ref;\n  const dispatch = useDispatch();\n  const [stats, setStats] = useState(JSON.parse(localStorage.getItem(statsName)) || []);\n  useEffect(() => {\n    const newStats = {\n      data: dateNow(),\n      count: count.totalCount + 1\n    };\n    setStats([...stats, newStats]);\n    if (stats && status.reloadStatus) localStorage.setItem(statsName, JSON.stringify(stats));\n  }, [count.totalCount]);\n  useEffect(() => {\n    if (JSON.parse(localStorage.getItem(statsName))) {\n      let statistics = JSON.parse(localStorage.getItem(statsName));\n\n      if (statistics.length >= 1) {\n        dispatch(setTotalCountAction(statistics[statistics.length - 1].count));\n\n        if (statistics[0].data !== statistics[statistics.length - 1].data) {\n          localStorage.removeItem(statsName);\n          dispatch(setTotalCountAction(0));\n        }\n      }\n    }\n  }, []);\n};\n\n_s(useStats, \"4k39G7hpZB5Ffbxy/AJFe2AjGXc=\", false, function () {\n  return [useDispatch];\n});","map":{"version":3,"sources":["C:/Users/bouku/Desktop/Time Tracker/time-tracker/src/hooks/useStats.js"],"names":["React","useState","useEffect","useSelector","useDispatch","DATA","statsName","dateNow","useStats","count","status","dispatch","stats","setStats","JSON","parse","localStorage","getItem","newStats","data","totalCount","reloadStatus","setItem","stringify","statistics","length","setTotalCountAction","removeItem"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AAEA,MAAMC,SAAS,GAAG,iBAAlB;AACA,MAAM;AAACC,EAAAA;AAAD,IAAWF,IAAjB;AAEA,OAAO,MAAMG,QAAQ,GAAG,QAAoB;AAAA;;AAAA,MAAnB;AAACC,IAAAA,KAAD;AAAOC,IAAAA;AAAP,GAAmB;AAC1C,QAAMC,QAAQ,GAAEP,WAAW,EAA3B;AACD,QAAM,CAACQ,KAAD,EAAQC,QAAR,IAAoBZ,QAAQ,CACjCa,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBX,SAArB,CAAX,KAA+C,EADd,CAAlC;AAGAJ,EAAAA,SAAS,CAAC,MAAM;AACf,UAAMgB,QAAQ,GAAG;AAACC,MAAAA,IAAI,EAAEZ,OAAO,EAAd;AAAkBE,MAAAA,KAAK,EAAEA,KAAK,CAACW,UAAN,GAAmB;AAA5C,KAAjB;AACEP,IAAAA,QAAQ,CAAC,CAAC,GAAGD,KAAJ,EAAUM,QAAV,CAAD,CAAR;AACF,QAAIN,KAAK,IAAIF,MAAM,CAACW,YAApB,EACCL,YAAY,CAACM,OAAb,CAAqBhB,SAArB,EAAgCQ,IAAI,CAACS,SAAL,CAAeX,KAAf,CAAhC;AACD,GALQ,EAKN,CAACH,KAAK,CAACW,UAAP,CALM,CAAT;AAOElB,EAAAA,SAAS,CAAC,MAAM;AACjB,QAAIY,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBX,SAArB,CAAX,CAAJ,EAAiD;AAChD,UAAIkB,UAAU,GAAGV,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBX,SAArB,CAAX,CAAjB;;AACA,UAAIkB,UAAU,CAACC,MAAX,IAAqB,CAAzB,EAA4B;AAC3Bd,QAAAA,QAAQ,CAACe,mBAAmB,CAACF,UAAU,CAACA,UAAU,CAACC,MAAX,GAAoB,CAArB,CAAV,CAAkChB,KAAnC,CAApB,CAAR;;AACA,YAAIe,UAAU,CAAC,CAAD,CAAV,CAAcL,IAAd,KAAuBK,UAAU,CAACA,UAAU,CAACC,MAAX,GAAoB,CAArB,CAAV,CAAkCN,IAA7D,EAAmE;AAClEH,UAAAA,YAAY,CAACW,UAAb,CAAwBrB,SAAxB;AACAK,UAAAA,QAAQ,CAACe,mBAAmB,CAAC,CAAD,CAApB,CAAR;AACA;AACD;AACD;AACD,GAXU,EAWR,EAXQ,CAAT;AAYF,CAxBM;;GAAMlB,Q;UACKJ,W","sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport {useSelector, useDispatch} from \"react-redux\";\r\nimport {DATA} from \"../utilites/date\";\r\n\r\nconst statsName = \"DATA:STATISTICS\";\r\nconst {dateNow}= DATA;\r\n\r\nexport const useStats = ({count,status}) => {\r\n  const dispatch= useDispatch()\r\n\tconst [stats, setStats] = useState(\r\n\t\tJSON.parse(localStorage.getItem(statsName)) || [],\r\n\t);\r\n\tuseEffect(() => {\r\n\t\tconst newStats = {data: dateNow(), count: count.totalCount + 1};\r\n    setStats([...stats,newStats]);\r\n\t\tif (stats && status.reloadStatus)\r\n\t\t\tlocalStorage.setItem(statsName, JSON.stringify(stats));\r\n\t}, [count.totalCount]);\r\n\r\n  \tuseEffect(() => {\r\n\t\tif (JSON.parse(localStorage.getItem(statsName))) {\r\n\t\t\tlet statistics = JSON.parse(localStorage.getItem(statsName));\r\n\t\t\tif (statistics.length >= 1) {\r\n\t\t\t\tdispatch(setTotalCountAction(statistics[statistics.length - 1].count));\r\n\t\t\t\tif (statistics[0].data !== statistics[statistics.length - 1].data) {\r\n\t\t\t\t\tlocalStorage.removeItem(statsName);\r\n\t\t\t\t\tdispatch(setTotalCountAction(0));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}, []);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}