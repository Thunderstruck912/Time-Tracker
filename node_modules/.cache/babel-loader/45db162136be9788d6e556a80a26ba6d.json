{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\bouku\\\\Desktop\\\\Time Tracker\\\\time-tracker\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _slicedToArray from\"C:\\\\Users\\\\bouku\\\\Desktop\\\\Time Tracker\\\\time-tracker\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{useState,useEffect}from\"react\";import{useDispatch}from\"react-redux\";import{setTotalCountAction}from\"../store/totalCountReducer\";import{DATA}from\"../utilites/date\";var statsName=\"DATA:STATISTICS\";var dateNow=DATA.dateNow;export var useStats=function useStats(_ref){var count=_ref.count,status=_ref.status;var dispatch=useDispatch();var statistics=JSON.parse(localStorage.getItem(statsName));var _useState=useState(statistics||[]),_useState2=_slicedToArray(_useState,2),stats=_useState2[0],setStats=_useState2[1];// ADD AND SAVE LOCAL STORAGE //\nuseEffect(function(){var newStats={data:dateNow(),count:count.totalCount+1};setStats([].concat(_toConsumableArray(stats),[newStats]));if(stats&&status.reloadStatus)localStorage.setItem(statsName,JSON.stringify(stats));},[count.totalCount]);// LOAD AND AUTO UPDATE NEXT DAY //\nuseEffect(function(){if(statistics&&statistics.length>=1){dispatch(setTotalCountAction(statistics[statistics.length-1].count));if(statistics[0].data!==statistics[statistics.length-1].data){localStorage.removeItem(statsName);dispatch(setTotalCountAction(0));}}},[]);};","map":{"version":3,"sources":["C:/Users/bouku/Desktop/Time Tracker/time-tracker/src/hooks/useStats.js"],"names":["useState","useEffect","useDispatch","setTotalCountAction","DATA","statsName","dateNow","useStats","count","status","dispatch","statistics","JSON","parse","localStorage","getItem","stats","setStats","newStats","data","totalCount","reloadStatus","setItem","stringify","length","removeItem"],"mappings":"0SAAA,OAAQA,QAAR,CAAkBC,SAAlB,KAAkC,OAAlC,CACA,OAAQC,WAAR,KAA0B,aAA1B,CACA,OAAQC,mBAAR,KAAkC,4BAAlC,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CAEA,GAAMC,CAAAA,SAAS,CAAG,iBAAlB,CACA,GAAOC,CAAAA,OAAP,CAAkBF,IAAlB,CAAOE,OAAP,CAEA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAqB,IAAnBC,CAAAA,KAAmB,MAAnBA,KAAmB,CAAZC,MAAY,MAAZA,MAAY,CAC5C,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CACA,GAAMS,CAAAA,UAAU,CAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBV,SAArB,CAAX,CAAnB,CACA,cAA0BL,QAAQ,CAACW,UAAU,EAAI,EAAf,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eAEA;AACAhB,SAAS,CAAC,UAAM,CACf,GAAMiB,CAAAA,QAAQ,CAAG,CAACC,IAAI,CAAEb,OAAO,EAAd,CAAkBE,KAAK,CAAEA,KAAK,CAACY,UAAN,CAAmB,CAA5C,CAAjB,CACAH,QAAQ,8BAAKD,KAAL,GAAYE,QAAZ,GAAR,CACA,GAAIF,KAAK,EAAIP,MAAM,CAACY,YAApB,CACCP,YAAY,CAACQ,OAAb,CAAqBjB,SAArB,CAAgCO,IAAI,CAACW,SAAL,CAAeP,KAAf,CAAhC,EACD,CALQ,CAKN,CAACR,KAAK,CAACY,UAAP,CALM,CAAT,CAOA;AAEAnB,SAAS,CAAC,UAAM,CACf,GAAIU,UAAU,EAAIA,UAAU,CAACa,MAAX,EAAqB,CAAvC,CAA0C,CACzCd,QAAQ,CAACP,mBAAmB,CAACQ,UAAU,CAACA,UAAU,CAACa,MAAX,CAAoB,CAArB,CAAV,CAAkChB,KAAnC,CAApB,CAAR,CACA,GAAIG,UAAU,CAAC,CAAD,CAAV,CAAcQ,IAAd,GAAuBR,UAAU,CAACA,UAAU,CAACa,MAAX,CAAoB,CAArB,CAAV,CAAkCL,IAA7D,CAAmE,CAClEL,YAAY,CAACW,UAAb,CAAwBpB,SAAxB,EACAK,QAAQ,CAACP,mBAAmB,CAAC,CAAD,CAApB,CAAR,CACA,CACD,CACD,CARQ,CAQN,EARM,CAAT,CASA,CAxBM","sourcesContent":["import {useState, useEffect} from \"react\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {setTotalCountAction} from \"../store/totalCountReducer\";\r\nimport {DATA} from \"../utilites/date\";\r\n\r\nconst statsName = \"DATA:STATISTICS\";\r\nconst {dateNow} = DATA;\r\n\r\nexport const useStats = ({count, status}) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst statistics = JSON.parse(localStorage.getItem(statsName));\r\n\tconst [stats, setStats] = useState(statistics || []);\r\n\r\n\t// ADD AND SAVE LOCAL STORAGE //\r\n\tuseEffect(() => {\r\n\t\tconst newStats = {data: dateNow(), count: count.totalCount + 1};\r\n\t\tsetStats([...stats, newStats]);\r\n\t\tif (stats && status.reloadStatus)\r\n\t\t\tlocalStorage.setItem(statsName, JSON.stringify(stats));\r\n\t}, [count.totalCount]);\r\n\r\n\t// LOAD AND AUTO UPDATE NEXT DAY //\r\n\r\n\tuseEffect(() => {\r\n\t\tif (statistics && statistics.length >= 1) {\r\n\t\t\tdispatch(setTotalCountAction(statistics[statistics.length - 1].count));\r\n\t\t\tif (statistics[0].data !== statistics[statistics.length - 1].data) {\r\n\t\t\t\tlocalStorage.removeItem(statsName);\r\n\t\t\t\tdispatch(setTotalCountAction(0));\r\n\t\t\t}\r\n\t\t}\r\n\t}, []);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}